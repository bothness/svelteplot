<script module>
    export const title = 'Scanline Y';
</script>

<script lang="ts">
    import {
        Plot,
        Line,
        RuleY,
        Dot,
        Text,
        Pointer
    } from 'svelteplot';
    import { page } from '$app/state';
    import type { ExamplesData } from '../types';
    let { aapl } = $derived(page.data.data) as ExamplesData;
</script>

<Plot marginRight={20}>
    <Line data={aapl} x="Date" y="Close" opacity={0.6} />
    <Pointer data={aapl} y="Close" maxDistance={30}>
        {#snippet children({ data })}
            <RuleY {data} y="Close" opacity={0.2} />
            <Text
                {data}
                fill="currentColor"
                stroke="var(--svelteplot-bg)"
                strokeWidth={3}
                y="Close"
                text={(d) => d.Close.toFixed()}
                lineAnchor="middle"
                textAnchor="end"
                dx={-5}
                frameAnchor="left"
                fontWeight="bold" />
            <Dot {data} x="Date" y="Close" fill r={3} />
        {/snippet}
    </Pointer>
</Plot>
